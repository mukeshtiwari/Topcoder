<html>
<head>
    <title>MoreSquares</title>
</head>
<body>
<h1><a href="/tc?module=ProblemDetail&amp;rd=17450&amp;pm=15362">MoreSquares</a></h1>

<p><em>TCO19 SRM 754 Round 1 - Division I, Level One</em></p>

<h2>Statement</h2>

<p>Given a set of points in the plane, its square count is the number of ways in which we can select four of those points in such a way that they form the corners of a square.
The square may be rotated arbitrarily. Order of the four points does not matter. For example, the square count for the set { (1,2), (1,0), (0,1), (2,1) } is 1.</p>

<p>You are given a set S of points in the plane with integer coordinates.
Return the number of points P with the following property: P is not in S, and if we add P to S, the square count will increase.</p>

<p>In order to keep the input size small, S is given as follows:
You are given the ints <em>N</em>, <em>SX</em>, <em>SY</em>, and the int[]s <em>Xprefix</em> and <em>Yprefix</em>.
Use the pseudocode given below to generate S.</p>

<p>X, Y = two empty arrays of length N each
L    = length(Xprefix)</p>

<p>for i = 0 .. L-1:
    X[i] = Xprefix[i]
    Y[i] = Yprefix[i]</p>

<p>for i = L .. N-1:
    X[i] = ( X[i-1] * 47 + 42 ) modulo SX
    Y[i] = ( Y[i-1] * 47 + 42 ) modulo SY</p>

<p>for i = 0 .. N-1:
    if (X[i], Y[i]) is not in S:
        add (X[i], Y[i]) to S</p>

<h2>Definitions</h2>

<ul>
<li><em>Class</em>: <code>MoreSquares</code></li>
<li><em>Method</em>: <code>countLocations</code></li>
<li><em>Parameters</em>: <code>int, int, int, int[], int[]</code></li>
<li><em>Returns</em>: <code>int</code></li>
<li><em>Method signature</em>: <code>int countLocations(int N, int SX, int SY, int[] Xprefix, int[] Yprefix)</code></li>
</ul>


<h2>Notes</h2>

<ul>
<li>The reference solution would work fast enough for any input of the given size, it does not depend on any properties of the pseudorandom generator.</li>
<li>The new point P can lie anywhere in the plane.</li>
</ul>


<h2>Constraints</h2>

<ul>
<li><em>N</em> will be between 1 and 3,000, inclusive.</li>
<li><em>SX</em> and <em>SY</em> will each be between 1 and 10<sup>6</sup>, inclusive.</li>
<li><em>Xprefix</em> will have between 1 and min(100,<em>N</em>) elements, inclusive.</li>
<li><em>Yprefix</em> will have the same number of elements as <em>Xprefix</em>.</li>
<li>Each element of <em>Xprefix</em> will be between 0 and <em>SX</em>-1, inclusive.</li>
<li>Each element of <em>Yprefix</em> will be between 0 and <em>SY</em>-1, inclusive.</li>
</ul>


<h2>Examples</h2>

<h3>Example 1</h3>

<h4>Input</h4>

<p><c>3,<br />100,<br />100,<br />[3, 0, 2],<br />[0, 1, 2]</c></p>

<h4>Output</h4>

<p><c>1</c></p>

<h4>Reason</h4>

<p>The set S contains the points (3,0), (0,1), and (2,2). By adding a fourth point at (1,-1) we can increase the square count from 0 to 1.</p>

<h3>Example 2</h3>

<h4>Input</h4>

<p><c>5,<br />100,<br />100,<br />[47, 47, 47, 47, 47],<br />[47, 47, 47, 47, 47]</c></p>

<h4>Output</h4>

<p><c>0</c></p>

<h4>Reason</h4>

<p>The set S contains only one point: (47, 47). Adding a second point will always produce a two-element set with square count zero.</p>

<h3>Example 3</h3>

<h4>Input</h4>

<p><c>23,<br />11,<br />13,<br />[7],<br />[0]</c></p>

<h4>Output</h4>

<p><c>5</c></p>

<h4>Reason</h4>

<p>The set S contains 20 points. In the order of insertion, these are: (7, 0), (8, 3), (0, 1), (9, 11), (3, 0), (7, 3), (8, 1), (0, 11), (9, 0), (3, 3), (7, 1), (8, 11), (0, 0), (9, 3), (3, 1), (7, 11), (8, 0), (0, 3), (9, 1), (3, 11). The last three points generated using the formula in the statement are (7, 0), (8, 3), and (0, 1) again.</p>

<p>The five possible locations for the new point that increases the square count are (6, 2), (8, -1), (8, 2), (10, 2), and (11, 8).</p>

</body>
</html>
